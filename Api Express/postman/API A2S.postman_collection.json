{
	"info": {
		"_postman_id": "d6f03695-6ae0-4f05-a4b1-0a3fe296c524",
		"name": "API A2S",
		"description": "# üåê Dolibarr Gateway API ‚Äì Postman Collection\n\nCette collection regroupe l‚Äôensemble des **endpoints Express** utilis√©s pour tester une **passerelle API** entre une application externe et l‚ÄôERP **Dolibarr**.\n\nElle permet notamment :\n\n- ‚úÖ D‚Äôenvoyer des requ√™tes authentifi√©es via un token (`DOLAPIKEY`)\n    \n- ‚úÖ D‚Äôinterroger les tiers et autres ressources Dolibarr\n    \n- ‚úÖ De valider rapidement le bon fonctionnement de la passerelle\n    \n\n> Cette API ne remplace pas Dolibarr : elle simplifie son acc√®s, s√©curise la communication et sert de couche d‚Äôabstraction. \n  \n\n---\n\nüìå _N‚Äôoubliez pas de renseigner correctement la cl√©_ `_DOLAPIKEY_` _dans les requ√™tes pour acc√©der aux donn√©es._\n\nVoir la documentation complete pour plus de details sur les endpoints.",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "42620669"
	},
	"item": [
		{
			"name": "Authentification",
			"item": [
				{
					"name": "Authentification",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \r\n    \"login\": \"admin\", \r\n    \"password\": \"admin\" \r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseURL}}/api/auth/login",
						"description": "## üîê Authentification\n\nPour utiliser l‚ÄôAPI, une cl√© d‚Äôacc√®s Dolibarr (**API Key**) doit √™tre envoy√©e dans l‚Äôen-t√™te `DOLAPIKEY`.\n\n### Dans Postman\n\n1. R√©cup√©rez votre **token Dolibarr** dans l‚Äôinterface Dolibarr\n    \n2. Dans Postman, collez-le dans l‚Äôonglet **Headers** ou directement dans la r√©ponse\n    \n3. Cliquez droit sur la valeur du token\n    \n4. S√©lectionnez **‚ÄúSet as variable‚Äù** ‚Üí `dolapikey`\n    \n\nüìå Cela permet √† toute la collection Postman d‚Äôutiliser automatiquement cette cl√© dans les requ√™tes."
					},
					"response": []
				}
			]
		},
		{
			"name": "Tiers",
			"item": [
				{
					"name": "Liste pagin√©e des tiers",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/thirdparties?page=0&client_type=1",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"thirdparties"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "client_type",
									"value": "1"
								}
							]
						},
						"description": "## üß© Filtrer les tiers par type (`client_type`) ‚Äî _Endpoint :_ `GET /thirdparties`\n\nLors de l‚Äôappel au endpoint `thirdparties` via notre API passerelle, **deux param√®tres sont obligatoires** :\n\n| Param√®tre | Type | Obligatoire | R√¥le |\n| --- | --- | --- | --- |\n| `page` | number | ‚úÖ | Indice de page (pagination) ‚Äî commence √† `0` |\n| `client_type` | number | ‚úÖ | Filtre selon le type de tiers |\n\n### Valeurs autoris√©es pour `client_type`\n\nCorrespond √† la valeur du champ interne **`t.client`** dans Dolibarr :\n\n| Valeur | Signification Dolibarr |\n| --- | --- |\n| **0** | Ni client, ni prospect |\n| **1** | Client uniquement |\n| **2** | Prospect uniquement |\n| **3** | Client **et** prospect |\n\nSi aucun tiers ne correspond au `client_type` fourni, l‚ÄôAPI renverra :\n\n``` json\n {\n   \"status\": \"error\"\n }\n\n ```"
					},
					"response": []
				},
				{
					"name": "D√©tails d'un tiers",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": "{{baseURL}}/api/thirdparties/1"
					},
					"response": []
				},
				{
					"name": "Liste des remises fixes associ√©es",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": "{{baseURL}}/api/thirdparties/1/fixedamountdiscounts"
					},
					"response": []
				}
			]
		},
		{
			"name": "Produits",
			"item": [
				{
					"name": "Liste des produits",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/products?page=0",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"products"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "D√©tails d'un produit",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": "{{baseURL}}/api/products/1"
					},
					"response": []
				},
				{
					"name": "Stock d'un produit",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": "{{baseURL}}/api/products/1/stock"
					},
					"response": []
				},
				{
					"name": "Recherche par code-barres",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": "{{baseURL}}/api/products/products/barcode/12345"
					},
					"response": []
				}
			]
		},
		{
			"name": "Commandes",
			"item": [
				{
					"name": "Liste des commandes",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/orders?page=0&thirdparty_ids=1",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"orders"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "thirdparty_ids",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "D√©tails d'une commande",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": "{{baseURL}}/api/orders/1"
					},
					"response": []
				}
			]
		},
		{
			"name": "Configuration",
			"item": [
				{
					"name": "Types de paiements",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/setup?page=0",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"setup"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Devis",
			"item": [
				{
					"name": "Liste des devis",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseURL}}/api/proposal?page=0&thirdparty_ids=1",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"api",
								"proposal"
							],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "thirdparty_ids",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Enregistrer un devis",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "DOLAPIKEY",
								"value": "{{dolapikey}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"socid\": 1,\r\n  \"date\": \"2025-10-07\",\r\n  \"cond_reglement_id\": 1,\r\n  \"mode_reglement_id\": 1,\r\n  \"note_public\": \"Proposition valable 30 jours.\",\r\n  \"note_private\": \"Client fid√®le ‚Äî offrir 5% de remise s'il valide avant la fin du mois.\",\r\n  \"lines\": [\r\n    {\r\n       \"desc\": \"Maintenance annuelle\",\r\n      \"product_type\": 1,\r\n    \"product_id\": 12,\r\n      \"qty\": 1,\r\n      \"subprice\": 300,\r\n      \"tva_tx\": 20\r\n    }\r\n  ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": "{{baseURL}}/api/proposal"
					},
					"response": []
				}
			],
			"description": "### ‚úÖ Activation du module Propositions commerciales dans Dolibarr\n\nPour utiliser les endpoints li√©s aux **propositions commerciales** (`/proposals`) depuis Postman ou via l‚ÄôAPI, il est n√©cessaire d‚Äôactiver le module correspondant dans Dolibarr.\n\n#### √âtapes √† suivre dans Dolibarr\n\n1. Configuration ‚Üí Modules/Applications\n    \n2. Propositions commerciales dans Gestion de la relation client (GRC)\n    \n    ‚úÖ Le bouton doit devenir vert.\n    \n3. Utilisateurs & Groupes ‚Üí \\[Choisir votre utilisateur\\] ‚Üí Permissions\n    \n4. V√©rifier et activer les droits suivants :\n    \n    - ‚úÖ Lire les propositions commerciales\n        \n    - ‚úÖ Cr√©er/modifier les propositions commerciales\n        \n    - ‚úÖ (Optionnel) Supprimer les propositions commerciales\n        \n    - ‚úÖ (Optionnel) Valider / Fermer les propositions commerciales\n        \n5. D√©connexion / reconnexion utilisateur üîÑ pour que les permissions soient appliqu√©es."
		}
	],
	"variable": [
		{
			"key": "baseURL",
			"value": "",
			"type": "default"
		},
		{
			"key": "dolapikey",
			"value": "",
			"type": "default"
		}
	]
}